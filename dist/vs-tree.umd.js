var Y=Object.defineProperty,$=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var x=(o,a,h)=>a in o?Y(o,a,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[a]=h,L=(o,a)=>{for(var h in a||(a={}))V.call(a,h)&&x(o,h,a[h]);if(N)for(var h of N(a))J.call(a,h)&&x(o,h,a[h]);return o},M=(o,a)=>$(o,G(a));var r=(o,a,h)=>(x(o,typeof a!="symbol"?a+"":a,h),h);var __vite_style__=document.createElement("style");__vite_style__.innerHTML=`.vs-loading{min-height:100px;background-image:url(data:image/svg+xml;base64,PCEtLSBCeSBTYW0gSGVyYmVydCAoQHNoZXJiKSwgZm9yIGV2ZXJ5b25lLiBNb3JlIEAgaHR0cDovL2dvby5nbC83QUp6YkwgLS0+Cjxzdmcgd2lkdGg9IjM4IiBoZWlnaHQ9IjM4IiB2aWV3Qm94PSIwIDAgMzggMzgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjZmZmIj4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMSAxKSIgc3Ryb2tlLXdpZHRoPSIzIj4KICAgICAgICAgICAgPGNpcmNsZSBzdHJva2U9IiMyYThhZTIiIGN4PSIxOCIgY3k9IjE4IiByPSIxOCIgLz4KICAgICAgICAgICAgPHBhdGggZD0iTTM2IDE4YzAtOS45NC04LjA2LTE4LTE4LTE4Ij4KICAgICAgICAgICAgICAgIDxhbmltYXRlVHJhbnNmb3JtCiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIgogICAgICAgICAgICAgICAgICAgIHR5cGU9InJvdGF0ZSIKICAgICAgICAgICAgICAgICAgICBmcm9tPSIwIDE4IDE4IgogICAgICAgICAgICAgICAgICAgIHRvPSIzNjAgMTggMTgiCiAgICAgICAgICAgICAgICAgICAgZHVyPSIxcyIKICAgICAgICAgICAgICAgICAgICByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPgogICAgICAgICAgICA8L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=);background-position:center center;background-repeat:no-repeat}.vs-tree-node{height:26px;cursor:pointer;color:#606266;font-size:14px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;white-space:nowrap;padding:0 0 2px;-webkit-box-sizing:border-box;box-sizing:border-box}.vs-tree-node:hover{background-color:#eee}.vs-tree-node:first-child .expand:before{height:0}.vs-indent-unit{position:relative;display:inline-block;width:14px;height:14px;vertical-align:middle}.vs-indent-unit:after{content:"";width:0;height:160%;position:absolute;left:50%;border-left:1px dashed #ddd;top:-8px}.vs-loading-unit.is-loading{width:14px;height:14px;margin-right:5px;display:inline-block;vertical-align:middle}.vs-loading-unit.is-loading:after{content:"";width:14px;height:14px;display:inline-block;vertical-align:top}.expand,.expand-empty{width:14px;height:14px;line-height:10px;display:inline-block;margin-right:5px;color:#bbb;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;vertical-align:middle}.expand{position:relative;cursor:pointer}.expand.vs-expand-icon:after{content:"";width:14px;height:14px;display:inline-block;background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmb2N1c2FibGU9ImZhbHNlIiB3aWR0aD0iMWVtIiBoZWlnaHQ9IjFlbSIgZmlsbD0iY3VycmVudENvbG9yIiBhcmlhLWhpZGRlbj0idHJ1ZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBmaWxsPSIjYmJiIiBkPSJNODQwLjQgMzAwSDE4My42Yy0xOS43IDAtMzAuNyAyMC44LTE4LjUgMzVsMzI4LjQgMzgwLjhjOS40IDEwLjkgMjcuNSAxMC45IDM3IDBMODU4LjkgMzM1YzEyLjItMTQuMiAxLjItMzUtMTguNS0zNXoiPjwvcGF0aD4KPC9zdmc+);background-size:10px 10px;background-repeat:no-repeat;background-position:center center;-webkit-transform:rotate(-90deg);transform:rotate(-90deg);-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s}.expanded{color:#bbb}.expanded.vs-expand-icon:after{-webkit-transform:rotate(0);transform:rotate(0)}.expand.is-loading:after,.vs-loading-unit.is-loading:after{background-image:url(../public/images/oval.svg);background-repeat:no-repeat;background-size:14px 14px;border:none;color:transparent}.vs-indent-unit~.expand:before{content:"";position:absolute;top:-50%;left:50%;width:0;height:50%;margin-top:-25%;border-left:1px dashed #ddd}.vs-tree-node:not([vs-child])+.vs-tree-node .vs-indent-unit~.expand:before{display:none}.vs-indent-unit~.expand-empty{position:relative}.vs-indent-unit~.expand-empty:after{content:"";position:absolute;top:50%;left:50%;width:50%;margin-top:-1px;border-bottom:1px dashed #ddd}.vs-indent-unit~.expand-empty:before{content:"";position:absolute;top:-50%;left:50%;height:200%;border-left:1px dashed #ddd}.selected{background-color:#eee}.vs-checkbox,.vs-radio{position:relative;color:#606266;font-weight:500;cursor:pointer;display:inline-block;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-right:8px;vertical-align:middle;font-size:0}.vs-checkbox__input,.vs-radio__input{white-space:nowrap;cursor:pointer;outline:none;display:inline-block;line-height:1;position:relative;vertical-align:middle}.vs-checkbox__inner,.vs-radio__inner{display:inline-block;position:relative;border:1px solid #d9d9d9;border-radius:2px;-webkit-box-sizing:border-box;box-sizing:border-box;width:14px;height:14px;background-color:#fff;z-index:1;-webkit-transition:border-color .25s cubic-bezier(.71,-.46,.29,1.46),background-color .25s cubic-bezier(.71,-.46,.29,1.46);transition:border-color .25s cubic-bezier(.71,-.46,.29,1.46),background-color .25s cubic-bezier(.71,-.46,.29,1.46)}.is-indeterminate .vs-checkbox__inner:before{content:"";position:absolute;display:block;background-color:#1989fa;height:12px;-webkit-transform:scale(.6);transform:scale(.6);left:0;right:0;top:0;border-radius:2px}.vs-checkbox__original:checked~.vs-checkbox__inner{background-color:#1989fa;border-color:#1989fa}.vs-checkbox__original:checked~.vs-checkbox__inner:after{-webkit-transform:rotate(45deg) scaleY(1);transform:rotate(45deg) scaleY(1)}.vs-checkbox__inner:after{-webkit-box-sizing:content-box;box-sizing:content-box;content:"";border:1px solid #FFFFFF;border-left:0;border-top:0;height:7px;left:4px;position:absolute;top:1px;-webkit-transform:rotate(45deg) scaleY(0);transform:rotate(45deg) scaleY(0);width:3px;-webkit-transition:all .2s cubic-bezier(.12,.4,.29,1.46) .1s;transition:all .2s cubic-bezier(.12,.4,.29,1.46) .1s;-webkit-transform-origin:center;transform-origin:center}.vs-checkbox__original:disabled~.vs-checkbox__inner{background-color:#edf2fc;border-color:#dcdfe6;cursor:not-allowed}.vs-checkbox__original:checked:disabled~.vs-checkbox__inner:after{border-color:#c0c4cc}.vs-checkbox__original,.vs-radio__original{opacity:0;outline:none;position:absolute;margin:0;width:0;height:0;z-index:-1}.vs-radio__inner{border-radius:100%}.vs-radio__inner:after{-webkit-box-sizing:content-box;box-sizing:content-box;content:"";left:3px;position:absolute;top:3px;width:6px;height:6px;-webkit-transform:scale(0);transform:scale(0);-webkit-transition:-webkit-transform .15s ease-in .05s;transition:-webkit-transform .15s ease-in .05s;transition:transform .15s ease-in .05s;transition:transform .15s ease-in .05s,-webkit-transform .15s ease-in .05s;-webkit-transform-origin:center;transform-origin:center;border-radius:100%}.vs-radio__original:checked~.vs-radio__inner{border-color:#1989fa}.vs-radio__original:checked~.vs-radio__inner:after{background-color:#1989fa;-webkit-transform:scale(1);transform:scale(1)}.vs-radio__original:checked:disabled~.vs-radio__inner:after{border-color:#c0c4cc}.vs-icon-leaf,.vs-icon-parent{width:14px;height:14px;margin-right:5px;display:inline-block;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PCEtLSBCeSBTYW0gSGVyYmVydCAoQHNoZXJiKSwgZm9yIGV2ZXJ5b25lLiBNb3JlIEAgaHR0cDovL2dvby5nbC83QUp6YkwgLS0+Cjxzdmcgdmlld0JveD0iNjQgNjQgODk2IDg5NiIgZm9jdXNhYmxlPSJmYWxzZSIgZGF0YS1pY29uPSJmaWxlIiB3aWR0aD0iMWVtIiBoZWlnaHQ9IjFlbSIgZmlsbD0iY3VycmVudENvbG9yIiBhcmlhLWhpZGRlbj0idHJ1ZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNODU0LjYgMjg4LjZMNjM5LjQgNzMuNGMtNi02LTE0LjEtOS40LTIyLjYtOS40SDE5MmMtMTcuNyAwLTMyIDE0LjMtMzIgMzJ2ODMyYzAgMTcuNyAxNC4zIDMyIDMyIDMyaDY0MGMxNy43IDAgMzItMTQuMyAzMi0zMlYzMTEuM2MwLTguNS0zLjQtMTYuNy05LjQtMjIuN3pNNzkwLjIgMzI2SDYwMlYxMzcuOEw3OTAuMiAzMjZ6bTEuOCA1NjJIMjMyVjEzNmgzMDJ2MjE2YTQyIDQyIDAgMDA0MiA0MmgyMTZ2NDk0eiI+PC9wYXRoPgo8L3N2Zz4=);background-size:12px 12px;background-repeat:no-repeat;background-position:center}.vs-icon-leaf>img,.vs-icon-parent>img{width:100%;height:100%}.vs-icon-parent{background-image:url(data:image/svg+xml;base64,PCEtLSBCeSBTYW0gSGVyYmVydCAoQHNoZXJiKSwgZm9yIGV2ZXJ5b25lLiBNb3JlIEAgaHR0cDovL2dvby5nbC83QUp6YkwgLS0+Cjxzdmcgdmlld0JveD0iNjQgNjQgODk2IDg5NiIgZm9jdXNhYmxlPSJmYWxzZSIgZGF0YS1pY29uPSJmb2xkZXItb3BlbiIgd2lkdGg9IjFlbSIgaGVpZ2h0PSIxZW0iIGZpbGw9ImN1cnJlbnRDb2xvciIgYXJpYS1oaWRkZW49InRydWUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTkyOCA0NDRIODIwVjMzMC40YzAtMTcuNy0xNC4zLTMyLTMyLTMySDQ3M0wzNTUuNyAxODYuMmE4LjE1IDguMTUgMCAwMC01LjUtMi4ySDk2Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY1OTJjMCAxNy43IDE0LjMgMzIgMzIgMzJoNjk4YzEzIDAgMjQuOC03LjkgMjkuNy0yMGwxMzQtMzMyYzEuNS0zLjggMi4zLTcuOSAyLjMtMTIgMC0xNy43LTE0LjMtMzItMzItMzJ6TTEzNiAyNTZoMTg4LjVsMTE5LjYgMTE0LjRINzQ4VjQ0NEgyMzhjLTEzIDAtMjQuOCA3LjktMjkuNyAyMEwxMzYgNjQzLjJWMjU2em02MzUuMyA1MTJIMTU5bDEwMy4zLTI1Nmg2MTIuNEw3NzEuMyA3Njh6Ij48L3BhdGg+Cjwvc3ZnPg==)}.vs-transition{height:0;-webkit-transition:all .3s ease;transition:all .3s ease;overflow-y:hidden}.vs-tree-node.vs-drag-enter{background-color:#1989facc;color:#fff}.vs-tree-node.vs-drag-over-gap-top,.vs-tree-node.vs-drag-over-gap-bottom{position:relative}.vs-tree-node.vs-drag-over-gap-top:before,.vs-tree-node.vs-drag-over-gap-bottom:before{content:"";position:absolute;left:0;width:100%;height:2px;background-color:#1989fa}.vs-tree-node.vs-drag-over-gap-top:before{top:0}.vs-tree-node.vs-drag-over-gap-bottom:before{bottom:0}.vs-search-only-leaf .vs-tree-inner{padding-left:0!important}.vs-search-only-leaf .vs-tree-inner .expand-empty{display:none}.vs-theme-element .is-indeterminate .vs-checkbox__inner{background-color:#1989fa;border-color:#1989fa}.vs-theme-element .is-indeterminate .vs-checkbox__inner:before{background-color:#fff;height:1px;width:50%;top:50%;left:50%;-webkit-transform:translate(-50%,-50%) scale(1);transform:translate(-50%,-50%) scale(1)}.vs-breadcrumb{-webkit-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;font-variant:tabular-nums;line-height:1.5715;list-style:none;-webkit-font-feature-settings:"tnum";font-feature-settings:"tnum";color:#00000073;font-size:14px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}.vs-breadcrumb>span{display:inline-block}.vs-breadcrumb>span:not(:last-child){cursor:pointer;color:#1989fa}.vs-breadcrumb>span:not(:last-child):hover{color:#1989facc}.vs-breadcrumb>span:last-child{color:#000000d9}.vs-breadcrumb-separator{margin:0 8px;color:#00000073}
`;document.head.appendChild(__vite_style__);(function(o,a){typeof exports=="object"&&typeof module!="undefined"?a(exports):typeof define=="function"&&define.amd?define(["exports"],a):(o=typeof globalThis!="undefined"?globalThis:o||self,a(o.vsTree={}))})(this,function(o){"use strict";const a="2.2.0";var h="";function w(l,e){const t=e.parentNode;!t||(t.lastChild===e?t.appendChild(l):t.insertBefore(l,e.nextSibling))}function E(l,e){var t=e.getBoundingClientRect().top,i=e.offsetHeight,s=l.pageY,n=2;return s>t+i-i?1:s<t+n?-1:0}const k=(l,e)=>{const t=e.store.slots[l];if(t){const s=t.node.cloneNode(!0);s.classList.add("vs-tree-text"),s.setAttribute("tree-node-id",e.id),e.__buffer={};var i=`
        var ${t.scope} = _;
      `;return t.text.replace(t.interpolate,(d,f)=>{i+=`_.__buffer['${d}'] = ${f};`}),new Function("_",i).call(e,e),s.innerText=s.innerText.replace(t.interpolate,d=>e.__buffer[d]).replace(/\n/g,""),s}return!1};let S=0;class m{constructor(e){r(this,"id",S++);r(this,"checked",!1);r(this,"expanded",!1);r(this,"indeterminate",!1);r(this,"visbile",!1);r(this,"disabled",!1);r(this,"loaded",!1);r(this,"isLeaf",!1);r(this,"level",0);r(this,"childNodes",[]);r(this,"store");r(this,"parent");r(this,"originData");r(this,"__buffer");r(this,"data");r(this,"sortId",0);r(this,"hasChildCount",0);r(this,"dom");r(this,"checkboxNode");r(this,"radioNode");r(this,"loadingEl");r(this,"loading");r(this,"expandEl");r(this,"checkboxEl");r(this,"transitionNode");if(this.store=e.store,this.parent=e.parent,this.originData=e.data,this.__buffer={},this.data=Object.assign({},e.data),typeof this.store.format=="function"&&!e.data._vsroot){const t=this.store.format(Object.assign({},e.data),this);if(typeof t!="object")throw new Error(`format must return object! 
format: function(data) {
  return {id, name, children, isLeaf}
}`);const i=["id","name","children","isLeaf","icon","extra"];for(let s=0,n=i.length;s<n;s++)Object.prototype.hasOwnProperty.call(t,i[s])&&(this.data[i[s]]=t[i[s]])}this.store.checkInherit&&this.parent&&(this.checked=this.parent.checked),this.store.disabledInherit&&this.parent&&(this.disabled=this.parent.disabled),this.store.expandKeys.includes(this.data.id)&&(this.expanded=!0),this.store.disabledKeys.includes(this.data.id)&&(this.disabled=!0),this.parent&&(this.level=this.parent.level+1),this.data&&this.setData(this.data),this.initData()}initData(){var e;if(this.level>this.store.expandLevel&&this.store.expandLevel!==-1&&!((e=this.parent)==null?void 0:e.expanded)){this.visbile=!1;return}this.visbile=!0}createNode(){if(this.dom)return this.checkboxNode&&(this.checkboxNode.checked=this.checked),this.radioNode&&(this.radioNode.checked=this.checked),this.indeterminate&&this.dom.classList.add("is-indeterminate"),this.dom;const e=document.createElement("div");e.className="vs-tree-node",e.setAttribute("vs-index",`${this.id}`),this.indeterminate&&e.classList.add("is-indeterminate"),!this.isLeaf&&this.childNodes.length&&e.setAttribute("vs-child",`${!0}`),e.appendChild(this.createInner());const t=k("append",this);return t?e.appendChild(t):this.store.renderContent&&e.appendChild(this.createContent()),e.addEventListener("click",i=>{i.stopPropagation(),this.store.highlightCurrent&&(this.store.selectedCurrent&&this.store.selectedCurrent.dom.classList.remove("selected"),e.classList.add("selected")),this.store.checkOnClickNode&&!this.disabled&&!(this.store.breadcrumb&&!this.isLeaf)&&this.handleCheckChange({target:{checked:!this.checked}}),this.store.selectedCurrent=this,this.store.breadcrumb&&!this.isLeaf&&(this.store.breadcrumb.list.push(this),this.setExpand(!0)),this.store.click(i,this)},{passive:!1}),e.addEventListener("contextmenu",i=>{this.store.contextmenu&&typeof this.store.contextmenu=="function"&&(i.stopPropagation(),i.preventDefault(),this.store.contextmenu(i,this))}),this.store.draggable&&this.createDragable(e),this.dom=e,e}createInner(){var s;const e=document.createElement("div");e.className="vs-tree-inner";let t=this.level+(this.store.hideRoot?-1:0);if(this.store.breadcrumb&&(t=0),this.store.showLine)for(let n=0;n<t;n++){const d=document.createElement("span");d.className="vs-indent-unit",e.appendChild(d)}else e.style.paddingLeft=t*this.store.indent+"px";let i;return this.store.breadcrumb?(this.loadingEl=document.createElement("span"),this.loadingEl.className="vs-loading-unit",e.appendChild(this.loadingEl)):(this.store.strictLeaf?i=this.isLeaf?this.createExpandEmpty():this.createExpand():i=(((s=this.childNodes)==null?void 0:s.length)||this.store.lazy)&&!this.isLeaf?this.createExpand():this.createExpandEmpty(),e.appendChild(i)),(this.store.showCheckbox||this.store.showRadio)&&(!this.store.nocheckParent||this.isLeaf&&!this.childNodes.length)&&e.appendChild(this.createCheckbox()),this.store.showIcon&&(!this.store.onlyShowLeafIcon||!this.childNodes.length||this.isLeaf)&&e.appendChild(this.createIcon()),e.appendChild(this.createText()),e}cusmtomNode(e,t){const i=document.createElement(e);return t.text&&(i.innerText=t.text),t.className&&(i.className=t.className),t.children&&t.children.forEach(s=>{i.appendChild(s)}),typeof t.click=="function"&&i.addEventListener("click",s=>{s.stopPropagation(),t.click(s,this)},{passive:!1}),i}createContent(){const e=this.store.renderContent(this.cusmtomNode.bind(this),this);return e?(e.addEventListener("click",t=>{t.stopPropagation()},{passive:!1}),e):document.createElement("span")}createExpandEmpty(){const e=document.createElement("span");return e.className="expand-empty "+this.store.expandClass,e}createExpand(){const e=document.createElement("span");return e.className="expand "+this.store.expandClass,(this.level<this.store.expandLevel||this.store.expandLevel===-1||this.expanded)&&(e.classList.add("expanded"),this.expanded=!0),e.addEventListener("click",t=>{if(t.stopPropagation(),this.loading)return;const i=!e.classList.contains("expanded");this.setExpand(i)},{passive:!1}),this.expandEl=e,e}createCheckbox(){let e="checkbox";this.store.showRadio&&(e="radio");const t=document.createElement("label");t.className=`vs-${e}`;const i=document.createElement("span");i.className=`vs-${e}__inner`;const s=document.createElement("input");return s.type=e,s.checked=this.checked,s.disabled=this.disabled,s.className=`vs-${e}__original`,s.name=e==="radio"?"vs-radio"+(this.store.radioParentoOnly?this.parent.id:""):"vs-checkbox",e==="radio"?(s.name="vs-radio"+(this.store.radioParentoOnly?this.parent.id:""),this.radioNode=s):(s.name="vs-checkbox",this.checkboxNode=s),t.appendChild(s),t.appendChild(i),t.addEventListener("click",n=>{n.stopPropagation()},{passive:!1}),s.addEventListener("click",n=>{this.store.check(n,this)},{passive:!1}),s.addEventListener("change",n=>{n.stopPropagation(),this.handleCheckChange(n)}),this.checkboxEl=s,t}handleCheckChange(e){const t=e.target.checked;if(typeof this.store.beforeCheck=="function"&&!this.store.beforeCheck(this)){e.target.checked=!t;return}if(t&&this.store.checkMaxNodes(this)){this.store.limitAlert(),e.target.checked=!1;return}this.store.showRadio?this.updateRadioChecked(t):(this.updateChecked(t),this.updateCheckedParent(t)),this.store._change(this)}createText(){const e=k("name",this);if(e)return e;const t=document.createElement("span");return t.innerText=this.data.name,t.className="vs-tree-text",t}createIcon(){const e=document.createElement("span");return e.className=this.isLeaf&&!this.childNodes.length?"vs-icon-leaf":"vs-icon-parent",this.data.icon&&(this.data.icon instanceof HTMLElement?(e.style.backgroundImage="none",e.appendChild(this.data.icon)):e.classList.add(this.data.icon)),e}setData(e){this.store.dataMap.set(e.id,this),this.store.nodeMap.set(this.id,this),this.data=e,this.childNodes=[],typeof e.isLeaf=="boolean"?this.isLeaf=e.isLeaf:!e.children&&!this.store.lazy&&(this.isLeaf=!0);let t;this.level===0&&this.data instanceof m?t=this.data:t=this.data.children||[],t.length&&(this.loaded=!0);for(let i=0,s=t.length;i<s;i++)this.insertChild({data:t[i]})}insertChild(e,t=-1){return e instanceof m||(Object.assign(e,{parent:this,store:this.store}),e=new m(e)),e.level=this.level+1,typeof t=="undefined"||t<0?this.childNodes.push(e):this.childNodes.splice(t,0,e),e}insertBefore(e,t){let i;t&&(i=this.childNodes.indexOf(t)),this.insertChild(e,i)}insertAfter(e,t){let i;t&&(i=this.childNodes.indexOf(t),i!==-1&&(i+=1)),this.insertChild(e,i)}updateExpand(e=!1){this.childNodes.length&&this.childNodes.forEach(t=>{e&&this.expanded?t.visbile=!0:t.visbile=!1,t.updateExpand(e)})}updateChecked(e=!1,t=!1){!t&&this.disabled||!this.store.showCheckbox||(this.checked=e,this.sortId=Date.now(),this.checkboxNode&&(this.checkboxNode.checked=e),this.dom&&this.dom.classList.remove("is-indeterminate"),this.store.allowEmit(e,"p")&&this.parent&&(this.parent.indeterminate=!1),!!this.store.allowEmit(e,"s")&&this.childNodes.length&&this.childNodes.forEach(i=>{i.updateChecked(e)}))}updateCheckedParent(e=!1,t=!1){if(!t&&this.disabled||!this.store.showCheckbox||!this.store.allowEmit(e,"p")||!this.parent||this.store.nocheckParent)return;const i=this.parent.childNodes.every(n=>n.checked),s=this.parent.childNodes.some(n=>n.checked||n.indeterminate);i?(this.parent.checked=!0,this.parent.indeterminate=!1,this.parent.checkboxNode&&(this.parent.checkboxNode.checked=!0),this.parent.dom&&this.parent.dom.classList.remove("is-indeterminate")):s?(this.parent.checked=!1,this.parent.indeterminate=!0,this.parent.checkboxNode&&(this.parent.checkboxNode.checked=!1),this.parent.dom&&this.parent.dom.classList.add("is-indeterminate")):(this.parent.checked=!1,this.parent.indeterminate=!1,this.parent.checkboxNode&&(this.parent.checkboxNode.checked=!1),this.parent.dom&&this.parent.dom.classList.remove("is-indeterminate")),this.parent.updateCheckedParent()}updateRadioChecked(e=!1,t=!1){!t&&this.disabled||this.store.nocheckParent&&(this.childNodes.length||!this.isLeaf)||(this.store.radioParentoOnly?(this.store.radioMap[this.parent.id]&&(this.store.radioMap[this.parent.id].checked=!1),this.store.radioMap[this.parent.id]=this):(this.store.radioNode&&(this.store.radioNode=!1),this.store.radioNode=this),this.checked=e,this.radioNode&&(this.radioNode.checked=e))}setChecked(e=!1,t=!1){if(e&&this.store.checkMaxNodes(this)){this.store.limitAlert();return}if(this.store.showRadio){this.updateRadioChecked(e,t);return}!this.store.showCheckbox||(this.updateChecked(e,t),this.updateCheckedParent(e,t),this.store._change(this))}setDisabled(e=!0){this.disabled=e,this.checkboxEl&&(this.checkboxEl.disabled=e)}setExpand(e,t=!1){this.expanded=e,this.updateExpand(this.expanded),this.setAccordion(e),this.expandEl&&(e?this.expandEl.classList.add("expanded"):this.expandEl.classList.remove("expanded")),this.store.lazy&&!this.loaded?this.loadData(i=>{i&&!t&&this.storeUpdate()}):!t&&this.storeUpdate()}storeUpdate(){this.store.animation?this.createAnimation():this.store.update()}createAnimation(){this.transitionNode&&this.transitionNode.parentNode&&this.transitionNode.parentNode.removeChild(this.transitionNode);const e=document.createElement("div");if(e.className="vs-transition",this.childNodes.length>this.store.showCount)for(let s=0;s<this.store.showCount-1;s++){const n=this.childNodes[s];e.appendChild(n.dom||n.createNode())}else this.childNodes.forEach(s=>{e.appendChild(s.dom||s.createNode())});w(e,this.dom);const t=(this.childNodes.length>this.store.showCount?this.store.showCount:this.childNodes.length)*this.store.itemHeight+"px";this.expanded?setTimeout(()=>{e.style.height=t},0):(e.style.height=t,setTimeout(()=>{e.style.height="0"},0));const i=()=>{e.removeEventListener("transitionend",i),e.parentNode&&e.parentNode.removeChild(e),e.removeEventListener("transitionend",i),this.store.update()};e.addEventListener("transitionend",i),this.transitionNode=e}createDragable(e){e.draggable=!0,e.addEventListener("dragstart",i=>{i.stopPropagation(),this.store.dragNode=this,this.store.onDragstart(i,this);try{i.dataTransfer.setData("text/plain","")}catch{}}),e.addEventListener("dragover",i=>{i.preventDefault()}),e.addEventListener("dragenter",i=>{i.stopPropagation(),i.preventDefault(),t(this.store.dropNode);const s=this.dom;if(!s)return;const n=E(i,s);if(!(this.store.dragNode.dom===s&&n===0)&&(this.store.dropPostion=n,this.store.dropNode=s,this.store.onDragenter(i,this,s,n),this.store.dropable)){if(!this.expanded&&!this.isLeaf&&this.setExpand(!0),n===-1){s.classList.add("vs-drag-over-gap-top");return}if(n===1){s.classList.add("vs-drag-over-gap-bottom");return}this.isLeaf||s.classList.add("vs-drag-enter")}});function t(i){!i||(i.classList.remove("vs-drag-enter"),i.classList.remove("vs-drag-over-gap-bottom"),i.classList.remove("vs-drag-over-gap-top"))}e.addEventListener("dragleave",i=>{this.store.dropable&&t(i.target)}),e.addEventListener("drop",i=>{if(i.stopPropagation(),this.store.onDrop(i,this,this.store.dropPostion),this.store.dropable){t(this.store.dropNode);const s=this.store.dragNode;if(s&&this.parent){const n=Object.assign({},s.data);if(s.remove(),!n)return;this.store.dropPostion===-1?(this.parent.insertBefore({data:n},this),this.updateCheckedParent(),this.store.updateNodes()):this.store.dropPostion===1?(this.parent.insertAfter({data:n},this),this.updateCheckedParent(),this.store.updateNodes()):this.isLeaf||this.append(n)}}})}setAccordion(e){if(this.store.accordion&&this.parent&&e){const t=this.store.expandMap[this.parent.id];if(t===this)return;t&&t.setExpand(!1),this.store.expandMap[this.parent.id]=this}}loadData(e){if(this.loading)return;this.loading=!0,this.expandEl?this.expandEl.classList.add("is-loading"):this.loadingEl&&this.loadingEl.classList.add("is-loading");const t=(i=[])=>{this.loaded=!0,this.loading=!1,this.expandEl?this.expandEl.classList.remove("is-loading"):this.loadingEl&&this.loadingEl.classList.remove("is-loading"),i.length&&(i.forEach(s=>{this.insertChild({data:s,store:this.store})}),this.childNodes[0].updateCheckedParent(),this.store.updateNodes()),e&&e.call(this,i)};this.store.load(this,t)}remove(){const e=this.parent;if(!e)return;const t=e.childNodes||[],i=t.findIndex(s=>s.id===this.id);i>-1&&t.splice(i,1),this.store.updateNodes()}append(e){if(!e||typeof e!="object")return;let t=this.dom;this.childNodes.length!==0&&(t=null);const i=this.insertChild({data:e,store:this.store});this.data.children?this.data.children.push(e):this.data.children=[e],this.isLeaf=!1,t&&(delete this.dom,t.parentNode.replaceChild(this.createNode(),t)),i.updateCheckedParent(),this.store.updateNodes()}}class A{constructor(e){r(this,"root");r(this,"nodes",[]);r(this,"radioMap",{});r(this,"expandMap",{});for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this[t]=e[t]);this.dataMap=new Map,this.nodeMap=new Map,this.root=new m({data:this.data,store:this}),this.updateNodes(),this.breadcrumb&&this.breadcrumb.list.push(this.root),this.changeNodes=[]}setData(e){this.root.childNodes=[],this.root.setData(e),this.updateNodes()}updateNodes(){this.nodes=this.flattenTreeData(),this.nodesChange(this.nodes)}flattenTreeData(){const e=[],t=i=>{if(e.push(i),i.childNodes&&i.childNodes.length)for(let s=0,n=i.childNodes.length;s<n;s++)t(i.childNodes[s])};return t(this.root),e}getNodeById(e){return this.dataMap.get(e)}getCheckedNodes(e=!1){const t=this.nodes.filter(i=>i.checked&&!i.data._vsroot&&this._checkVerify(i)&&(!this.nocheckParent||!i.childNodes.length));if(this.sort){const i=t.sort((s,n)=>s.sortId-n.sortId);return e?i:i.map(s=>s.data)}return e?t:t.map(i=>i.data)}setDefaultChecked(){this.checkedKeys.forEach(e=>{const t=this.getNodeById(e);t?t.setChecked(!0,!0):console.warn("not found node by "+e)})}checkMaxNodes(e){if(!this.max)return!1;if(!e.checked&&e.hasChildCount>this.max)return!0;const t=this.getCheckedNodes().length;return!e.checked&&t+(e.isLeaf?1:this.getUnCheckLeafsCount(e))>this.max}getUnCheckLeafsCount(e){let t=this._checkVerify(e)&&!e.checked?1:0;return e.childNodes.forEach(i=>{t+=this.getUnCheckLeafsCount(i)}),t}allowEmit(e,t){const{Y:i,N:s}=this.checkboxType;if(e){if(!i.includes(t))return!1}else if(!s.includes(t))return!1;return!0}_checkVerify(e){return typeof this.checkFilter=="function"?this.checkFilter(e):this.checkFilterLeaf?e.isLeaf:!0}_change(e){this.changeNodes.push(e),this._changeTimer&&clearTimeout(this._changeTimer),this._changeTimer=setTimeout(()=>{this.change(this.changeNodes),this.changeNodes=[]},0)}}const u={FRONT:"FRONT",BEHIND:"BEHIND"},I={INIT:"INIT",FIXED:"FIXED",DYNAMIC:"DYNAMIC"},v=2;class z{constructor(e,t){r(this,"param");r(this,"callUpdate");r(this,"sizes",new Map);r(this,"firstRangeTotalSize",0);r(this,"firstRangeAverageSize",0);r(this,"lastCalcIndex",0);r(this,"fixedSizeValue",0);r(this,"calcType");r(this,"offset",0);r(this,"direction");r(this,"range");this.init(e,t)}init(e,t){this.param=e,this.callUpdate=t,this.sizes=new Map,this.firstRangeTotalSize=0,this.firstRangeAverageSize=0,this.lastCalcIndex=0,this.fixedSizeValue=0,this.calcType=I.INIT,this.offset=0,this.direction="",this.range=Object.create(null),e&&this.checkRange(0,e.keeps-1)}destroy(){this.init(null,()=>{})}getRange(){const e=Object.create(null);return e.start=this.range.start,e.end=this.range.end,e.padFront=this.range.padFront,e.padBehind=this.range.padBehind,e}isBehind(){return this.direction===u.BEHIND}isFront(){return this.direction===u.FRONT}getOffset(e){return(e<1?0:this.getIndexOffset(e))+this.param.slotHeaderSize}updateParam(e,t){this.param&&e in this.param&&(e==="uniqueIds"&&this.sizes.forEach((i,s)=>{t.includes(s)||this.sizes.delete(s)}),this.param[e]=t)}handleDataSourcesChange(){let e=this.range.start;this.isFront()?e=e-v:this.isBehind()&&(e=e+v),e=Math.max(e,0),this.updateRange(this.range.start,this.getEndByStart(e))}handleSlotSizeChange(){this.handleDataSourcesChange()}handleScroll(e){this.direction=e<this.offset?u.FRONT:u.BEHIND,this.offset=e,!!this.param&&(this.direction===u.FRONT?this.handleFront():this.direction===u.BEHIND&&this.handleBehind())}handleFront(){const e=this.getScrollOvers();if(e>this.range.start)return;const t=Math.max(e-this.param.buffer,0);this.checkRange(t,this.getEndByStart(t))}handleBehind(){const e=this.getScrollOvers();e<this.range.start+this.param.buffer||this.checkRange(e,this.getEndByStart(e))}getScrollOvers(){const e=this.offset-this.param.slotHeaderSize;if(e<=0)return 0;if(this.isFixedType())return Math.floor(e/this.fixedSizeValue);let t=0,i=0,s=0,n=this.param.uniqueIds.length;for(;t<=n;){if(i=t+Math.floor((n-t)/2),s=this.getIndexOffset(i),s===e)return i;s<e?t=i+1:s>e&&(n=i-1)}return t>0?--t:0}getIndexOffset(e){if(!e)return 0;let t=0,i=0;for(let s=0;s<e;s++)i=this.sizes.get(this.param.uniqueIds[s]),t=t+(typeof i=="number"?i:this.getEstimateSize());return this.lastCalcIndex=Math.max(this.lastCalcIndex,e-1),this.lastCalcIndex=Math.min(this.lastCalcIndex,this.getLastIndex()),t}isFixedType(){return this.calcType===I.FIXED}getLastIndex(){return this.param.uniqueIds.length-1}checkRange(e,t){const i=this.param.keeps;this.param.uniqueIds.length<=i?(e=0,t=this.getLastIndex()):t-e<i-1&&(e=t-i+1),this.range.start!==e&&this.updateRange(e,t)}updateRange(e,t){this.range.start=e,this.range.end=t,this.range.padFront=this.getPadFront(),this.range.padBehind=this.getPadBehind(),this.callUpdate(this.getRange())}getEndByStart(e){const t=e+this.param.keeps-1;return Math.min(t,this.getLastIndex())}getPadFront(){return this.isFixedType()?this.fixedSizeValue*this.range.start:this.getIndexOffset(this.range.start)}getPadBehind(){const e=this.range.end,t=this.getLastIndex();return this.isFixedType()?(t-e)*this.fixedSizeValue:this.lastCalcIndex===t?this.getIndexOffset(t)-this.getIndexOffset(e):(t-e)*this.getEstimateSize()}getEstimateSize(){return this.isFixedType()?this.fixedSizeValue:this.firstRangeAverageSize||this.param.estimateSize}}class T{constructor(e){r(this,"$el");r(this,"wrapper");r(this,"virtual");r(this,"dataSources");r(this,"range");r(this,"keeps");r(this,"estimateSize");r(this,"dataKey");this.range=null,this.$el=e.root,this.$el.style.maxHeight=typeof e.maxHeight=="number"?e.maxHeight+"px":e.maxHeight,this.$el.style.minHeight=typeof e.minHeight=="number"?e.minHeight+"px":e.minHeight,this.$el.style.overflowY="auto",this.dataSources=e.data,this.wrapper=document.createElement("div"),this.wrapper.className="vs-virtual-list",this.$el.appendChild(this.wrapper),this.$el.addEventListener("scroll",this.onScroll.bind(this),{passive:!1}),this.keeps=e.keeps||20,this.estimateSize=e.estimateSize||26,this.dataKey="id",this.installVirtual()}getOffset(){const e=this.$el;return e?Math.ceil(e.scrollTop):0}getClientSize(){const e=this.$el;return e?Math.ceil(e.clientHeight):0}getScrollSize(){const e=this.$el;return e?Math.ceil(e.scrollHeight):0}scrollToIndex(e){if(e>=this.dataSources.length-1)this.scrollToBottom();else{const t=this.virtual.getOffset(e);this.scrollToOffset(t)}}scrollToBottom(){throw new Error("Method not implemented.")}scrollToOffset(e){throw new Error("Method not implemented.")}reset(){this.virtual.destroy(),this.scrollToOffset(0),this.installVirtual()}installVirtual(){this.virtual=new z({slotHeaderSize:0,slotFooterSize:0,keeps:this.keeps,estimateSize:this.estimateSize,buffer:Math.round(this.keeps/3),uniqueIds:this.getUniqueIdFromDataSources()},this.onRangeChanged.bind(this)),this.range=this.virtual.getRange(),this.render()}getUniqueIdFromDataSources(){const{dataKey:e}=this;return this.dataSources.map(t=>typeof e=="function"?e(t):t[e])}onRangeChanged(e){this.range=e,this.render()}onScroll(){const e=this.getOffset(),t=this.getClientSize(),i=this.getScrollSize();e<0||e+t>i+1||!i||this.virtual.handleScroll(e)}getRenderSlots(){const{start:e,end:t}=this.range,{dataSources:i,dataKey:s}=this;this.wrapper.innerHTML="";for(let n=e;n<=t;n++){const d=i[n];if(d){const f=typeof s=="function"?s(d):d[s];if(typeof f=="string"||typeof f=="number"){const p=d.createNode();if(d.store.onlySearchLeaf?p.classList.add("vs-search-only-leaf"):p.classList.remove("vs-search-only-leaf"),d.store.isSearch&&d.store.searchRender){const b=d.store.searchRender(d,p.cloneNode(!0));if(!(b instanceof HTMLElement))throw Error("searchRender must return HTMLElement");this.wrapper.appendChild(b)}else this.wrapper.appendChild(p)}else console.warn(`Cannot get the data-key '${s}' from data-sources.`)}else console.warn(`Cannot get the index '${n}' from data-sources.`)}}update(e){this.dataSources=e,this.wrapper.innerHTML="",this.virtual.updateParam("uniqueIds",this.getUniqueIdFromDataSources()),this.virtual.handleDataSourcesChange()}render(){const{padFront:e,padBehind:t}=this.range,i=`${e}px 0px ${t}px`;this.wrapper.style.padding=i,this.getRenderSlots()}}class D{constructor(e,t){r(this,"node");r(this,"data");r(this,"store");r(this,"parent");r(this,"renderIcon");r(this,"renderLink");r(this,"renderSeparator");this.node=e,this.data=e.data,this.store=e.store,this.parent=t;const{icon:i,link:s,separator:n="/"}=this.parent.options;this.renderIcon=i,this.renderLink=s,this.renderSeparator=n}createDom(){const e=this.parent.list,t=e.findIndex(n=>n===this.node),i=t===e.length-1,s=document.createElement("span");if(this.renderIcon){const n=this.createIcon();n&&s.appendChild(n)}return s.appendChild(this.createLink(e,t,i)),i||s.appendChild(this.createSeparator()),s}createIcon(){let e;if(typeof this.renderIcon=="function"?e=this.renderIcon(this.node,this.data):e=this.renderIcon,!e)return!1;const t=document.createElement("span");return t.className="vs-breadcrumb-icon",typeof this.renderIcon=="function"?e instanceof HTMLElement?t.appendChild(e):t.innerHTML=e:t.innerHTML=this.renderIcon,t}createLink(e,t,i){const s=document.createElement("span");if(s.className="vs-breadcrumb-link",typeof this.renderLink=="function"){const n=this.renderLink(this.node,this.data);n instanceof HTMLElement?s.appendChild(n):s.innerHTML=n}else s.innerHTML=this.data.name;return s.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),!i&&(e.splice(t+1),this.store.update())}),s}createSeparator(){const e=document.createElement("span");return e.className="vs-breadcrumb-separator",typeof this.renderSeparator=="function"?e.innerHTML=this.renderSeparator(this.node,this.data):e.innerHTML=this.renderSeparator,e}}class _{constructor(e){r(this,"store");r(this,"list",[]);r(this,"options");this.options=e}get current(){return this.list[this.list.length-1]}renderBreadcrumb(){this.store=this.current.store;const{el:e,change:t=()=>{}}=this.options;let i;e instanceof HTMLElement?i=e:e&&typeof e=="string"&&(i=document.querySelector(e)),i||(i=document.createElement("section")),i.classList.add("vs-breadcrumb");const s=this.list.map(n=>new D(n,this).createDom());i.innerHTML="",s.forEach(n=>{i.appendChild(n)}),t(i,this.list,this.current)}}const g=()=>{};class C{constructor(e,t){r(this,"$el");r(this,"store");r(this,"vlist");r(this,"data");r(this,"interpolate");r(this,"_data");r(this,"nodes");r(this,"itemHeight");r(this,"showCount");r(this,"maxHeight");r(this,"minHeight");r(this,"keyword");r(this,"searchFilter");r(this,"ready");r(this,"$$breadcrumb");if(typeof e=="string"){const c=document.querySelector(e);c instanceof HTMLElement&&(this.$el=c)}else this.$el=e;if(!(this.$el instanceof HTMLElement))throw Error("\u8BF7\u4E3A\u7EC4\u4EF6\u63D0\u4F9B\u6839\u8282\u70B9");this.$el.classList.add("vs-tree");const i=["#\\[\\[","\\]\\]"],[s,n]=i;var d=s+"([\\s\\S]+?)"+n;this.interpolate=new RegExp(d,"igm");const f={},p=this.$el.querySelectorAll("[tree-slot]");if(p&&p.length&&p.forEach(c=>{const O=c.attributes["tree-slot"].value,Z=c.attributes["tree-slot-scope"].value;f[O]={scope:Z,node:c,interpolate:this.interpolate,text:c.innerText,inner:c.outerHTML},c.parentNode.removeChild(c)}),t.theme&&this.$el.classList.add("vs-theme-"+t.theme),Array.isArray(t.data))this._data={_vsroot:!0,name:t.rootName||"---",children:t.data},t.rootName||(t.hideRoot=!0);else if(typeof t.data=="object")this._data=t.data;else throw Error("\u53C2\u6570data\u4EC5\u652F\u6301\u5BF9\u8C61\u6216\u6570\u7EC4\uFF01");this.nodes=[];const{showCount:b=20,itemHeight:F=26,maxHeight:P="400px",minHeight:R="0px"}=t.virtual||{};this.itemHeight=F,this.showCount=b,this.maxHeight=t.maxHeight||P,this.minHeight=t.minHeight||R,this.data=[],this.keyword="",this.searchFilter=t.searchFilter,this.ready=t.ready||g,Object.prototype.toString.call(t.breadcrumb)==="[object Object]"&&(this.$$breadcrumb=new _(t.breadcrumb));const y=()=>{this.store=new A({data:this._data,max:t.max,slots:f,breadcrumb:this.$$breadcrumb||null,strictLeaf:t.strictLeaf||!1,showCount:this.showCount,itemHeight:this.itemHeight,hideRoot:t.hideRoot||!1,animation:t.animation||!1,expandLevel:typeof t.expandLevel=="number"?t.expandLevel:1,beforeCheck:t.beforeCheck||null,showLine:t.showLine||!1,showIcon:t.showIcon||!1,onlyShowLeafIcon:t.onlyShowLeafIcon||!1,showCheckbox:t.showCheckbox||!1,checkboxType:t.checkboxType||{Y:"ps",N:"ps"},checkInherit:t.checkInherit||!1,disabledInherit:t.disabledInherit||!1,showRadio:t.showRadio||!1,highlightCurrent:t.highlightCurrent||!1,checkFilterLeaf:t.checkFilterLeaf||!1,checkFilter:t.checkFilter||null,accordion:t.accordion||!1,draggable:t.draggable||!1,dropable:t.dropable||!1,lazy:t.lazy||!1,sort:t.sort||!1,indent:t.indent||10,checkedKeys:t.checkedKeys||[],expandKeys:t.expandKeys||[],disabledKeys:t.disabledKeys||[],limitAlert:t.limitAlert||g,click:t.click||g,check:t.check||g,change:t.change||g,load:t.load||g,contextmenu:t.contextmenu||null,radioParentoOnly:t.radioType==="level"?"level":"all",renderContent:t.renderContent||null,nocheckParent:t.nocheckParent||!1,checkOnClickNode:t.checkOnClickNode||!1,format:t.format||null,searchRender:t.searchRender||null,searchDisabledChecked:t.searchDisabledChecked||!1,expandClass:t.expandClass||"vs-expand-icon",onDragstart:t.onDragstart||g,onDragenter:t.onDragenter||g,onDrop:t.onDrop||g,update:()=>{this._render()},nodesChange:c=>{this.nodes=c,this.vlist&&this._render()}}),this.store.hideRoot&&this.store.root.createNode(),this._init(),this.store.setDefaultChecked()};t.async?setTimeout(()=>{y()},0):y()}_init(){this.vlist=new T({root:this.$el,data:[],maxHeight:this.maxHeight,minHeight:this.minHeight,estimateSize:this.itemHeight,keeps:this.showCount}),this._render(),this.ready&&this.ready(this)}_render(e=!0){if(this.$$breadcrumb){const{current:t}=this.$$breadcrumb;this.data=this.nodes.filter(i=>i.parent&&i.parent.id===t.id),this.$$breadcrumb.renderBreadcrumb()}else this.data=this.nodes.filter(t=>this._hasKeyword(t)&&t.visbile&&!(this.store.hideRoot&&t.level===0));e&&this.vlist.update(this.data)}_hasKeyword(e){if(!this.keyword)return!0;let t=this._checkFilter(e);return t?e.parent&&(e.parent.requireExpand=!0):e.childNodes.forEach(i=>{t||(t=this._hasKeyword(i))}),t}_checkFilter(e){if(!!this.keyword)return typeof this.searchFilter=="function"?this.searchFilter(this.keyword,e,e.data):e.data.name&&e.data.name.includes(this.keyword)}filter(e="",t){if(this.keyword=e,this.store.onlySearchLeaf=t&&!!e,this.store.isSearch=!!e,this.store.onlySearchLeaf){const i=this.nodes.filter(s=>!s.childNodes.length&&this._checkFilter(s)&&!(this.store.hideRoot&&s.level===0));return this.vlist.update(i),i}this._render(!1);for(let i=0,s=this.data.length;i<s;i++){const n=this.data[i];n.requireExpand&&(n.requireExpand=!1,n.setExpand(!0,!0))}return this._render(),this.data}getNodeById(e){return this.store.getNodeById(e)}getCheckedNodes(...e){return this.store.getCheckedNodes(...e)}setMaxValue(e=0){this.store.max=e}scrollToIndex(e=0){this.vlist.scrollToIndex(e)}clearCheckedNodes(){this.getCheckedNodes(!0).forEach(t=>{t.setChecked(!1)})}}var j=l=>(e,t={})=>{e.component("vs-tree",{props:{data:Array|Object,options:Object,async:Boolean,animation:Boolean,draggable:Boolean,dropable:Boolean,hideRoot:Boolean,showCheckbox:Boolean,checkboxType:Object,showRadio:Boolean,radioType:String,showLine:Boolean,showIcon:Boolean,onlyShowLeafIcon:Boolean,highlightCurrent:Boolean,accordion:Boolean,nocheckParent:Boolean,sort:Boolean,checkOnClickNode:Boolean,checkFilterLeaf:Boolean,strictLeaf:Boolean,rootName:String,max:Number,lazy:Boolean,load:Function,format:Function,disabledKeys:Array,checkedKeys:Array,expandKeys:Array,keyword:String,expandClass:String,theme:String,breadcrumb:Object,expandLevel:{type:Number,default:1},indent:{type:Number,default:10},showCount:{type:Number,default:20},itemHeight:{type:Number,default:26},maxHeight:String,minHeight:String,beforeCheck:Function,renderContent:Function,checkFilter:Function,searchFilter:Function,searchRender:Function,onDragstart:Function,onDragenter:Function,onDrop:Function},data(){return{tree:{}}},watch:{max(i=0){this.setMaxValue(i)},keyword(i){this.filter(i)}},mounted(){this.$nextTick(()=>{this._vsinit()})},methods:{_vsinit(){console.time("render:tree"),this.tree.tree=new l(this.$refs.tree,Object.assign({},t,this.$props,M(L({},this.options),{data:this.data,click:(i,s)=>{this.$emit("click",i,s)},check:(i,s)=>{this.$emit("check",i,s)},change:i=>{this.$emit("change",i)},contextmenu:(i,s)=>{this.$emit("node-contextmenu",i,s)},limitAlert:()=>{this.$emit("limit-alert")}}))),console.timeEnd("render:tree")},getNodeById(i){return this.tree.tree.getNodeById(i)},getCheckedNodes(){return this.tree.tree.getCheckedNodes(...arguments)},filter(i){return this.tree.tree.filter(i)},setMaxValue(i=0){this.tree.tree.setMaxValue(i)}},render(i){return i("div",{ref:"tree"},this.$slots.default)}})};const H=a,B=j(C);o.default=C,o.install=B,o.version=H,Object.defineProperty(o,"__esModule",{value:!0}),o[Symbol.toStringTag]="Module"});
